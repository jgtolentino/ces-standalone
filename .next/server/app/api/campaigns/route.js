"use strict";(()=>{var e={};e.id=25,e.ids=[25],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8126:(e,a,t)=>{t.r(a),t.d(a,{originalPathname:()=>h,patchFetch:()=>_,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>v,staticGenerationAsyncStorage:()=>l});var n={};t.r(n),t.d(n,{GET:()=>u,POST:()=>d});var s=t(9303),r=t(8716),i=t(670),o=t(7070),c=t(6411),p=t(4544);async function u(e){try{let{searchParams:a}=new URL(e.url);a.get("status"),a.get("start_date"),a.get("end_date");let t=parseInt(a.get("limit")||"10"),n=parseInt(a.get("offset")||"0"),s=await (0,c.J)(),r=s.campaigns.length,i=s.campaigns.slice(n,n+t),p=s.campaigns.filter(e=>"active"===e.status).length,u=s.campaigns.reduce((e,a)=>e+a.spent,0),d=s.campaigns.reduce((e,a)=>e+a.impressions,0),g=s.campaigns.reduce((e,a)=>e+a.clicks,0),m=s.campaigns.reduce((e,a)=>e+a.conversions,0),l=s.campaigns.length>0?s.campaigns.reduce((e,a)=>e+a.revenue,0)/s.campaigns.length:0,v=d>0?g/d*100:0,h=g>0?m/g*100:0;return o.NextResponse.json({campaigns:i,pagination:{total:r,limit:t,offset:n,hasMore:n+t<r},aggregates:{totalCampaigns:r,activeCampaigns:p,totalSpend:u,totalImpressions:d,totalClicks:g,totalConversions:m,averageRevenue:Math.round(100*l)/100,overallCTR:Math.round(100*v)/100,overallConversionRate:Math.round(100*h)/100},generatedAt:new Date().toISOString()})}catch(e){return console.error("Error fetching campaigns:",e),o.NextResponse.json({error:"Failed to fetch campaigns"},{status:500})}}async function d(e){try{let a=await e.json(),t=["campaign_name","channel","budget","start_date","end_date"].filter(e=>!a[e]);if(t.length>0)return o.NextResponse.json({error:`Missing required fields: ${t.join(", ")}`},{status:400});let n=`
      INSERT INTO campaigns (
        campaign_name, status, channel, budget, spent, roi, reach, conversions,
        impressions, clicks, ctr, cpm, cpc, conversion_rate, start_date, end_date,
        brand, campaign_type, created_at, updated_at
      ) VALUES (
        $1, $2, $3, $4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, $5, $6, $7, $8, NOW(), NOW()
      ) RETURNING *;
    `,s=await (0,p.J)(n,[a.campaign_name,a.status||"draft",a.channel,parseFloat(a.budget),a.start_date,a.end_date,a.brand||"TBWA",a.campaign_type||"brand_awareness"]);if(0===s.rows.length)throw Error("Failed to create campaign");return o.NextResponse.json({campaign:s.rows[0],message:"Campaign created successfully"},{status:201})}catch(e){return console.error("Error creating campaign:",e),o.NextResponse.json({error:"Failed to create campaign"},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/campaigns/route",pathname:"/api/campaigns",filename:"route",bundlePath:"app/api/campaigns/route"},resolvedPagePath:"/Users/tbwa/Documents/GitHub/ai-agency/app/api/campaigns/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:v}=g,h="/api/campaigns/route";function _(){return(0,i.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:l})}},6411:(e,a,t)=>{async function n(e){return{campaigns:[{id:"camp_001",name:"Q4 Holiday Campaign",status:"active",budget:15e4,spent:89e3,impressions:25e5,clicks:45e3,conversions:1200,revenue:18e4,ctr:1.8,conversionRate:2.67,roas:2.02,cpm:35.6,cpc:1.98},{id:"camp_002",name:"Brand Awareness Drive",status:"active",budget:2e5,spent:156e3,impressions:42e5,clicks:78e3,conversions:2100,revenue:315e3,ctr:1.86,conversionRate:2.69,roas:2.02,cpm:37.14,cpc:2}],totalSpend:245e3,totalRevenue:495e3,overallROAS:2.02,totalImpressions:67e5,totalConversions:3300}}t.d(a,{J:()=>n})},4544:(e,a,t)=>{async function n(){return{status:"healthy",timestamp:new Date().toISOString(),version:"1.0.0"}}async function s(e,a=[]){return(console.log("Executing query:",e),e.includes("campaigns"))?{rows:[{id:"camp_001",name:"Q4 Holiday Campaign",budget:15e4,spent:89e3,status:"active"}]}:e.includes("analytics")?{rows:[{metric:"impressions",value:25e5,date:"2025-06-09"}]}:{rows:[]}}t.d(a,{D:()=>n,J:()=>s})}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),n=a.X(0,[276,972],()=>t(8126));module.exports=n})();